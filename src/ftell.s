;----------------------------------------------------------------------
;			includes cc65
;----------------------------------------------------------------------
.include "telestrat.inc"

;----------------------------------------------------------------------
;			includes SDK
;----------------------------------------------------------------------
.include "ch376.inc"

;----------------------------------------------------------------------
;				imports
;----------------------------------------------------------------------
.import fpos

;----------------------------------------------------------------------
;				exports
;----------------------------------------------------------------------
.export ftell

;----------------------------------------------------------------------
;
; Entrée:
;
; Sortie:
;	A : Modifié
;
; Variables:
;	Modifiées:
;		fsize: Tailledu fichier
;	Utilisées:
;		-
; Sous-routines:
;	-
;----------------------------------------------------------------------
.proc ftell
		lda	#CH376_READ_VAR32
		sta	CH376_COMMAND

		lda	#CH376_VAR_CURRENT_OFFSET
		sta	CH376_DATA

		lda	CH376_DATA
		sta	fpos

		lda	CH376_DATA
		sta	fpos+1

		lda	CH376_DATA
		sta	fpos+2

		lda	CH376_DATA
		sta	fpos+3

		rts
.endproc

